<!DOCTYPE html>
<html lang="en">
<%- include("./partials/head.ejs") %>
<body>
  <%- include("./partials/nav.ejs") %>
  <div class="page-content">
    <div class="product-content">
      <div class="header-addbtn">
        <h1>Edit Product - <%= product.name %></h1>
        <a href="/products/<%= product.id %>" class="backBtn">
          << Return to <%= product.name %>
        </a>
      </div>
      
      <form class="edit-form view-product-container" action="/products/edit/<%= product.id %>" method="POST" enctype="multipart/form-data">
        <div class="view-image">
          <img
            src="<%= product.imageData %>"
            class="view-product-img"
            alt="<%= product.name %>"
          />
          <input type="file" name="image" accept="image/png, image/jpeg, image/svg+xml" />
        </div>
        
        <div class="view-info">
          <div class="name-category">
            <h1>
              <input
                type="text"
                name="name"
                value="<%= product.name %>"
                required
              />
            </h1>
            <h3>
              $<input
                type="number"
                name="price"
                min="0.01"
                step="any"
                value="<%= product.price %>"
                required
              />
            </h3>
          </div>
          
          <h3 class="product-category">
            <select name="category" id="category">
              <% listedCategories.forEach((category) => { %>
                <option value="<%= category.category %>" 
                  <%= category.category === product.category ? 'selected' : '' %>>
                  <%= category.category %>
                </option>
              <% }) %>
            </select>
          </h3>
          
          <h4>
            <label for="brand">Brand:</label>
            <input
              type="text"
              name="brand"
              value="<%= product.brand %>"
              required
            />
          </h4>
          
          <textarea class="product-description" name="description" maxlength="300"><%= product.description %></textarea>
          
          <h4>
            <label for="quantity">Quantity:</label>
            <input
              type="number"
              name="quantity"
              min="1"
              max="999"
              value="<%= product.quantity %>"
              required
            />
          </h4>
        </div>
        
        <button type="submit" class="submitBtn">Submit Edits</button>
      </form>
    </div>
  </div>
</body>
</html>